language: java
jdk:
- openjdk11
services:
- docker
before_install:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
addons:
  apt:
    packages:
    - docker-ce
script:
- "./gradlew test build"
after_success:
- docker build -t innulic/brain-heap .
- docker images
- docker push innulic/brain-heap:latest
after_failure:
- cat target/surefire-reports/*.txt
deploy:
  provider: heroku
  app: brain-heap
  on:
    repo: annazarubina/brainheap-back
  api_key:
    secure: DK7gd0Fr42OjlVqJSKMTRvv6YjoE9v2xhZkkugmrRX9kdfRoCEWFRboy2zuQWgIkl8+f1CuqeMH+3xk0/NjiLj7V5DmWu1ieaWetGUDt8UX91De8Qkb+jWrBCP82IHrnXc9Kx1RSjaRIzB0b6N9TtRQZGpA1XySRmNS5rOXAbor7ZWz/PuRH6VfhEbZ63M5UlIhtRnfJmFu/wjlB04zQIfq2wLWMrj/eMr7R9ZkYUonhLgReWLk7vP3e+sAN3JCol4G7lWcQwfuJvFbp/oiMWMj6RWinpGbGdgRUFNEhXBvfDimoG5frewICYUWxgPDZncqQrlu2N1zyUUeCIK2OfZWTYco9BTZRgIv+/rXXWl2yY2r1IiUOVCb8kIBeIFsxdUm7+yLaR4oFbmQTV+rqtl3HTbUpgcxTssScFeLbN/ciNPoFEhB5rH1nCrlVQHhvjw2qzSZ1YYGUgIfAu7vyHXU56F8u6HDHtCfgFS7HqMxemS0SPu2Eee1oAiU59x0uFEvpXhnDVTIFLx47IwS9XoiACUGGPDUv8a/ENZ16B5DhizqqF16Qh4leIuP8PThsoNvhM3WA7jAYnkV97WeWoXS+RW5vPS6xc4Fv9avRpJ2aZ4C6w6j8O8DuoAZoTF9tNWF5zYfyohZ1UyAVX33kRR96DwXZ0WBFIkZ8QP0EEYA=
notifications:
  slack: neueda-technologies:ZYh2b6u5OcMbhwMu6i9U47fQ
  email:
    recipients:
    - innulic@mail.ru
    - a.a.zarubina@gmail.com
    - aflammaal@gmail.com
    on_success: change
    on_failure: always
env:
  matrix:
    secure: ZVH548F0B99Jz7u/7zdIACoaS/bAC04ZL38lsC7zVMdsEbQ0F9pIUXfjqnF2ZNehDSzKyWyYyE2wS652/G9jUrTVUXpRxHpsc1hrWDJH9uNSYvxlbeWCJNyWAhMvvLxH5pbmrNMOIcu+n5K0vsy/FejxgcQFp/LoYy8dWtRRxGAKcN5Zf46OVnVyUzmMNn1cogxHCxspYUBatAv10R71p1Qr32qddSr2ocbp3+HvuQe8me1CoBzCMwho75ZOe60Tx9iDH/7MXQY7IdyF6QHJ19tw+qDfSu26og83sehp3qOQvJf7CGcM532XWZYfjjb53lQtczoOZACN4WuuAgVbeGG1QlMhHfftip1Ut3YYS3TQg3LAtvfFFXarTD5n702RfvEAi2cRjgxX8NKrrQmnJBRUFr8FShQ5fmNo8/0V6xxxmoaoYBp07Fg20tVQLBfnsF5T/ckclHWdPoAu64bBiLpO73Tu5teI0ifnHtK2ysYnCNrK3Y0sqn1kqGcQMRbg+01WBX8mX+ePuDFYRR2svc/dnOPmvGTF4ojA7qQnHq59WyHYvg+M0RLCP+Xz5PYHsJOKUE+6pLtRDiyFrYr8yegsGpVaLhPAdR6p23cQmxTfGyi3b6n5Y8Bw2IR6orR1N/l31DQ8/AxkTzUs0Av7yq6U7bVRbJ5zCxuUMEcKbUI=
