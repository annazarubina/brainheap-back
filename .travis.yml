language: java
jdk:
- openjdk11
services:
- docker
before_install:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
addons:
  apt:
    packages:
    - docker-ce
script:
- "./gradlew test build"
after_success:
- docker build -t innulic/brain-heap .
- docker images
- docker push innulic/brain-heap:latest
after_failure:
- cat target/surefire-reports/*.txt
deploy:
  provider: heroku
  app: brain-heap
  on:
    repo: annazarubina/brainheap-back
  api_key:
    secure: VD/ihWOQErD9+4qw73VzQ8Dg1Ei3IOxA5pgE6mf/1R3UF7ZNad6IIhIYIXtIkinGFKtmKw0DqxEmKeYMbLQRTaJr9wwVTRaUYybEQKQJzMfiyhMtz10qrW0zwLVi2c0+JrEtkTMnYA/GyNSpySWXktrPdCmv+kNjLWWNHorslnf/Yba5z3AQ7Ob1AI/6Y142oeQdtQu5+g5p04OEkw8/2Twf1/sWuSKUAK/Tmpm8Hq9rJnMm/xRXIY54y7MzDLno+ihsKiL+8q2mhpMwYrB/DB/De9vSF3xrH771mkYkT6+bUkwSs6BuAjjTPBvq2it4D+joyVjBPqzY6pphy6cDXUIb7wqBI+PDym1xU8v2VosgV4TDVtvAGZjC91AMFz0S3l7oZ5qX7sd3YcL/tGkF4nf+Sjl4gmyAxRAZl0o93e/Ut1kg4xvWerakFhbkB0IJmhzGo9fO9f9iu8y7HWhrSrgMAfDm66+dDDdoONK+sZg5U0BzTeAA29jl5cA/CbhEaPJSjBiAZiOFpSUcVIBL0jQd7KoIizuWfuGzG7yUar3/07ze2cNuI7dgW3jafI1WYuuPC4iwK2oAuVGIVbDkQwDcAqwUVBN8gWiVIQ1EdafCSHzkr6J/5X95i/kqEAtxHYZp4i0L9Xv6v4hsoAnJa6SX0FQjH9gtZ5HYTsBb6Ss=
notifications:
  slack: neueda-technologies:ZYh2b6u5OcMbhwMu6i9U47fQ
  email:
    recipients:
    - innulic@mail.ru
    - a.a.zarubina@gmail.com
    - aflammaal@gmail.com
    on_success: change
    on_failure: always
env:
  matrix:
    secure: ZVH548F0B99Jz7u/7zdIACoaS/bAC04ZL38lsC7zVMdsEbQ0F9pIUXfjqnF2ZNehDSzKyWyYyE2wS652/G9jUrTVUXpRxHpsc1hrWDJH9uNSYvxlbeWCJNyWAhMvvLxH5pbmrNMOIcu+n5K0vsy/FejxgcQFp/LoYy8dWtRRxGAKcN5Zf46OVnVyUzmMNn1cogxHCxspYUBatAv10R71p1Qr32qddSr2ocbp3+HvuQe8me1CoBzCMwho75ZOe60Tx9iDH/7MXQY7IdyF6QHJ19tw+qDfSu26og83sehp3qOQvJf7CGcM532XWZYfjjb53lQtczoOZACN4WuuAgVbeGG1QlMhHfftip1Ut3YYS3TQg3LAtvfFFXarTD5n702RfvEAi2cRjgxX8NKrrQmnJBRUFr8FShQ5fmNo8/0V6xxxmoaoYBp07Fg20tVQLBfnsF5T/ckclHWdPoAu64bBiLpO73Tu5teI0ifnHtK2ysYnCNrK3Y0sqn1kqGcQMRbg+01WBX8mX+ePuDFYRR2svc/dnOPmvGTF4ojA7qQnHq59WyHYvg+M0RLCP+Xz5PYHsJOKUE+6pLtRDiyFrYr8yegsGpVaLhPAdR6p23cQmxTfGyi3b6n5Y8Bw2IR6orR1N/l31DQ8/AxkTzUs0Av7yq6U7bVRbJ5zCxuUMEcKbUI=
