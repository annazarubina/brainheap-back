language: java
jdk:
- openjdk11
services:
- docker
before_install:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
addons:
  apt:
    packages:
    - docker-ce
script:
- "./gradlew test build"
after_success:
- docker build -t innulic/brain-heap .
- docker images
- docker push innulic/brain-heap:latest
after_failure:
- cat target/surefire-reports/*.txt
deploy:
  provider: heroku
  app: brain-heap
  on:
    repo: annazarubina/brainheap-back
  api_key:
    secure: kWNBWGTH9yXiwHwps+CSaHnzoTU/IHLaSuEovkGN91sZ6JpcKK7lZMsKfn2EX8COrTiSU/k1Oye5l5Ho4LO70wBzoAtVCpvtR9AVaeuicKwr4EV/ZV/7/0hnxwUQTQmH1OE7hFgt8W33tGQCpEh77S1Bgxp7C3oRQOeOKyanu3yQqrmFgfJvDRTmN1Rc70ST43EITBOLgNkxILL2XFmX/oJDwZwi6ssdY+sVTpap2JB7LOq2NLcN7bZNF67lC1tlSlM/ZGpaujzqdzP/qbBEb1azTGxFpXZS80NclFjx9UR3aaJtoswBpEhYnWAjvQN2OG/tzAOE9MgDlZEJyxJNCyw/D3vUXzQEEEqNu26D7tnKSuKmvYLyK/LeRK4uku/IeDiy9dats3jSW16aW6zmcLExLkk5uLQYG5OxGQ3HOgQgfs6bQGMGeKEJA4Aq/uqQPFBfaaSk0YKWB6e1vERCUCsnf5+zgLIaBbgPIcpRVRpO1vS3OOG7Z/J3bf470jm6fqWAKXs1KTJyE68axI4PeUSw2YudqbbBWN2tk90HAhR3ytwRMYFZz2Zru+AEn4eJmvlIi5c3G4gxR26LIc4SoCxGc6znt5oFc2pWq5+DrY7kC8PoVJ6qNuggjIL5Ws18j2Z1IRYUdmmzQEputAiJ6Z8jvzwWkFwNw3RpWEURk68=
notifications:
  slack: neueda-technologies:ZYh2b6u5OcMbhwMu6i9U47fQ
  email:
    recipients:
    - innulic@mail.ru
    - a.a.zarubina@gmail.com
    - aflammaal@gmail.com
    on_success: change
    on_failure: always
env:
  matrix:
    secure: ZVH548F0B99Jz7u/7zdIACoaS/bAC04ZL38lsC7zVMdsEbQ0F9pIUXfjqnF2ZNehDSzKyWyYyE2wS652/G9jUrTVUXpRxHpsc1hrWDJH9uNSYvxlbeWCJNyWAhMvvLxH5pbmrNMOIcu+n5K0vsy/FejxgcQFp/LoYy8dWtRRxGAKcN5Zf46OVnVyUzmMNn1cogxHCxspYUBatAv10R71p1Qr32qddSr2ocbp3+HvuQe8me1CoBzCMwho75ZOe60Tx9iDH/7MXQY7IdyF6QHJ19tw+qDfSu26og83sehp3qOQvJf7CGcM532XWZYfjjb53lQtczoOZACN4WuuAgVbeGG1QlMhHfftip1Ut3YYS3TQg3LAtvfFFXarTD5n702RfvEAi2cRjgxX8NKrrQmnJBRUFr8FShQ5fmNo8/0V6xxxmoaoYBp07Fg20tVQLBfnsF5T/ckclHWdPoAu64bBiLpO73Tu5teI0ifnHtK2ysYnCNrK3Y0sqn1kqGcQMRbg+01WBX8mX+ePuDFYRR2svc/dnOPmvGTF4ojA7qQnHq59WyHYvg+M0RLCP+Xz5PYHsJOKUE+6pLtRDiyFrYr8yegsGpVaLhPAdR6p23cQmxTfGyi3b6n5Y8Bw2IR6orR1N/l31DQ8/AxkTzUs0Av7yq6U7bVRbJ5zCxuUMEcKbUI=
